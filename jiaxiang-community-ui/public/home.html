<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>
<div class="content" id="abc">
    <div class="content-1">
        <h1>嘉和社区</h1>
    </div>
    <div class="content-2">
        <div class="con2-1">
            <h2 style="margin-bottom: 12px;margin-left: 16px;
                    margin-left: 16px; display: flex;justify-content: space-between;">
                <span>社区活动</span>
                <span class="nav-button"
                      style="width: 60px; height: auto; background:url('img/home_more.png') no-repeat"
                      data-target="shequhuodong"></span>
            </h2>
            <div class="carousel-container">
                <button class="carousel-btn prev">
                    <i class="fas fa-chevron-left"></i>
                </button>

                <div class="carousel">
                    <div class="carousel-item" data-id="service1">
                        <img src="img/activaties/星火阅读/image1.png" alt="活动" class="carousel-img">
                        <div class="carousel-text">
                            <h3>“星火阅读·好书推荐官”风采展示活动</h3>
                            <p>2024年10月19日</p>
                        </div>
                    </div>

                    <div class="carousel-item" data-id="service2">
                        <img src="img/activaties/祥城慧老/image.png" alt="Image 2" class="carousel-img">
                        <div class="carousel-text">
                            <h3>嘉祥县“祥城慧老”健身气功八段锦</h3>
                            <p>2024年11月13日</p>
                        </div>
                    </div>

                    <div class="carousel-item" data-id="service3">
                        <img src="img/activaties/抵制高价彩礼/image.png" alt="Image 3" class="carousel-img">
                        <div class="carousel-text">
                            <h3>“抵制高价彩礼 倡树婚俗新风”</h3>
                            <p>2024年09月30日</p>
                        </div>
                    </div>

                    <div class="carousel-item" data-id="service4">
                        <img src="img/activaties/红色贴珠画/image.png" alt="Image 4" class="carousel-img">
                        <div class="carousel-text">
                            <h3>“红色贴珠画 共抒爱国心”</h3>
                            <p>2024年09月25日</p>
                        </div>
                    </div>

                    <div class="carousel-item" data-id="service5">
                        <img src="img/activaties/绘出多彩世界凝聚社区温情/image.png" alt="Image 5" class="carousel-img">
                        <div class="carousel-text">
                            <h3>“绘出多彩世界凝聚社区温情”</h3>
                            <p>2025年2月16日</p>
                        </div>
                    </div>
                    <div class="carousel-item" data-id="service6">
                        <img src="img/activaties/圾时分类/image.png" alt="Image 7" class="carousel-img">
                        <div class="carousel-text">
                            <h3>“圾”时分类，绿色“童”行</h3>
                            <p>2024年11月30日</p>
                        </div>
                    </div>
                    <div class="carousel-item" data-id="service7">
                        <img src="img/activaties/饺香暖冬/image.png" alt="Image 6" class="carousel-img">
                        <div class="carousel-text">
                            <h3>饺香暖冬</h3>
                            <p>2024年11月07日</p>
                        </div>
                    </div>
                    <div class="carousel-item" data-id="service8">
                        <img src="img/activaties/镂刻新岁，雕艺焕彩/image.png" alt="Image 6" class="carousel-img">
                        <div class="carousel-text">
                            <h3>镂刻新岁，雕艺焕彩</h3>
                            <p>2025年1月22日</p>
                        </div>
                    </div>
                    <div class="carousel-item" data-id="service9">
                        <img src="img/activaties/巧手编织，扮靓生活/image.png" alt="Image 6" class="carousel-img">
                        <div class="carousel-text">
                            <h3>巧手编织，扮靓生活</h3>
                            <p>2024年09月26日</p>
                        </div>
                    </div>
                    <div class="carousel-item" data-id="service10">
                        <img src="img/activaties/巧手做月饼，送出社区情/image.png" alt="Image 6" class="carousel-img">
                        <div class="carousel-text">
                            <h3>巧手做月饼，送出社区情</h3>
                            <p>2024年09月12日-2024年09月13日</p>
                        </div>
                    </div>
                    <div class="carousel-item" data-id="service11">
                        <img src="img/activaties/正双姿，写未来/image.png" alt="Image 6" class="carousel-img">
                        <div class="carousel-text">
                            <h3>正双姿，写未来</h3>
                            <p>2024年12月15日</p>
                        </div>
                    </div>
                    <div class="carousel-item" data-id="service12">
                        <img src="img/activaties/健康义诊进社区/image.png" alt="Image 6" class="carousel-img">
                        <div class="carousel-text">
                            <h3>健康义诊进社区</h3>
                            <p>2024年10月24日</p>
                        </div>
                    </div>
                    <div class="carousel-item" data-id="service13">
                        <img src="img/activaties/老年学堂音乐课堂/image.png" alt="Image 6" class="carousel-img">
                        <div class="carousel-text">
                            <h3>老年学堂音乐课堂</h3>
                            <p>2024年12月04日</p>
                        </div>
                    </div>
                    <div class="carousel-item" data-id="service14">
                        <img src="img/activaties/品元宵叙党情奔赴新征程/image.png" alt="Image 6" class="carousel-img">
                        <div class="carousel-text">
                            <h3>品元宵叙党情奔赴新征程</h3>
                            <p>2025年2月12日</p>
                        </div>
                    </div>
                    <div class="carousel-item" data-id="service15">
                        <img src="img/activaties/悦享夕阳老年声乐课堂/image.png" alt="Image 6" class="carousel-img">
                        <div class="carousel-text">
                            <h3>悦享夕阳老年声乐课堂</h3>
                            <p>2025年1月7日</p>
                        </div>
                    </div>
                    <div class="carousel-item" data-id="service16">
                        <img src="" alt="Image 6" class="carousel-img">
                        <div class="carousel-text">
                            <h3>巧绘年画 喜迎新春”</h3>
                            <p>2025年1月22日</p>
                        </div>
                    </div>
                </div>

                <button class="carousel-btn next">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
        <div class="con2-2">
            <button class="con22-1 nav-button" data-target="notifications">
                <img src="img/service-icon.png" alt="为民服务"> <span style="font-size: 30px;">为民服务</span>
            </button>
            <button class="con22-2 nav-button" data-target="users">
                <img src="img/affair-icon.png" alt="为民办事"> <span style="font-size: 30px;">为民办事</span>
            </button>
            <button class="con22-3 nav-button" data-target="reports">
                <img src="img/list-icon.png" alt="履职清单"> <span style="font-size: 30px;">履职清单</span>
            </button>
        </div>
    </div>
    <div class="content-3">
        <h2>社区简介</h2>
        <p>
            嘉和社区是一个充满温暖与活力的居住区域，致力于为居民提供舒适、安全、便捷的生活环境。
            社区定期举办各类活动，包括健康讲座、体育赛事、环保行动等，以增强邻里关系，促进社区文化建设。
            我们的目标是打造一个和谐美好的社区，提升居民的幸福感，提供各种便民服务，创造更加美好的生活体验。
            嘉和社区坚持“党建为核、治理为基、服务为本”，积极整合社区资源、搭建治理平台、凝聚社会力量，打造
            了“幸福嘉 和邻里”的社区品牌，引导各方力量共同参与社区治理，不断提升居民在社区生活的获得感、幸福感。
        </p>
        <!-- 按钮 -->
        <div class="community-buttons">
            <button class="nav-button" data-target="dashboard">
                <img src="img/icon_search.png" alt="查看详细"> 查看详细
            </button>
            <button class="nav-button" data-target="users">
                <img src="img/sqry_icon.png" alt="社区荣誉"> 社区荣誉
            </button>
        </div>
    </div>
</div>
<script src="js/three.js"></script>
<script src="js/dots.js"></script>
<script src="js/api-urls.js"></script>
<script>
    // 为所有导航按钮添加点击事件
    //import apiUrls from "./js/api-urls.js";

    document.querySelectorAll('.nav-button').forEach(button => {
        button.addEventListener('click', function () {
            const target = this.getAttribute('data-target');
            // 构建目标URL
            let url = 'sidebar.html?target=' + target;
            // 跳转到目标页面
            window.location.href = url;
        });
    });

    document.addEventListener('DOMContentLoaded', async function () {
        const carousel = document.querySelector('.carousel');
        const items = document.querySelectorAll('.carousel-item');
        const prevBtn = document.querySelector('.prev');
        const nextBtn = document.querySelector('.next');

        const response = (await (await fetch(window.API_URLS.list_community_activities(1,999))).json()).data;
        console.log(response)
        const carouselContent = response.reduce((acc, item, index, arr) => {
            index++;
            acc += `
                    <div class="carousel-item" data-id="service${index}">
                        <img src="${item.images}" alt="Image ${index}" class="carousel-img">
                        <div class="carousel-text">
                            <h3>${item.title}</h3>
                            <p>${item.startTime}</p>
                        </div>
                    </div>
            `
            return acc;
        }, "");

        carousel.innerHTML = carouselContent;


        // 为每个活动项添加点击事件
        document.querySelectorAll('.carousel-item').forEach(item => {
            item.addEventListener('click', function () {
                const itemId = this.getAttribute('data-id');
                // 构建目标URL
                let url = 'sidebar.html?target=shequhuodong&id=' + itemId;
                // 跳转到目标页面
                window.location.href = url;
            });
        });


        let currentIndex = 0;
        const itemWidth = items[0].offsetWidth + 20; // 包含margin

        function updateCarousel() {
            carousel.style.transform = `translateX(-${currentIndex * itemWidth}px)`;

            // 禁用/启用按钮
            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex >= items.length - 3;
        }

        prevBtn.addEventListener('click', function () {
            if (currentIndex > 0) {
                currentIndex--;
                updateCarousel();
            }
        });

        nextBtn.addEventListener('click', function () {
            if (currentIndex < items.length - 3) {
                currentIndex++;
                updateCarousel();
            }
        });

        // 响应式调整
        window.addEventListener('resize', function () {
            const newItemWidth = items[0].offsetWidth + 20;
            if (newItemWidth !== itemWidth) {
                carousel.style.transform = `translateX(-${currentIndex * newItemWidth}px)`;
            }
        });
    });
    // 等待页面加载完成
    window.addEventListener('load', function () {
        // 初始化Vanta.DOTS效果
        const vantaEffect = VANTA.DOTS({
            el: "#abc",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 200.00,
            minWidth: 200.00,
            scale: 1.00,
            scaleMobile: 1.00,
            showLines: false,
            backgroundAlpha: 0.2
        });
    });
</script>

<!--    <script type="module" src="./js/request-interceptor.js"></script>-->

</body>

</html>